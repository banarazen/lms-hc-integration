<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E2E Journey — LMS ↔ HC Integration</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f172a; color: #e2e8f0; overflow-x: hidden; }

    .journey-header {
      background: linear-gradient(135deg, #1e293b, #0f172a);
      padding: 32px 40px;
      border-bottom: 1px solid #334155;
    }
    .journey-header h1 { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
    .journey-header p { font-size: 14px; color: #94a3b8; }
    .journey-header a { color: #93c5fd; text-decoration: none; }

    .journey-nav {
      display: flex;
      gap: 0;
      background: #1e293b;
      border-bottom: 1px solid #334155;
      padding: 0 40px;
      overflow-x: auto;
    }
    .journey-tab {
      padding: 14px 20px;
      font-size: 13px;
      font-weight: 500;
      color: #94a3b8;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      white-space: nowrap;
      transition: all 0.2s;
    }
    .journey-tab:hover { color: #e2e8f0; }
    .journey-tab.active { color: #60a5fa; border-bottom-color: #3b82f6; }

    .journey-content { padding: 32px 40px; max-width: 1200px; }

    .journey-section { display: none; }
    .journey-section.active { display: block; }

    /* Step cards */
    .step-track {
      position: relative;
      padding-left: 40px;
    }
    .step-track::before {
      content: '';
      position: absolute;
      left: 19px;
      top: 20px;
      bottom: 20px;
      width: 2px;
      background: #334155;
    }
    .step-card {
      position: relative;
      margin-bottom: 24px;
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }
    .step-num {
      position: absolute;
      left: -40px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
      flex-shrink: 0;
      z-index: 2;
    }
    .step-num.lms { background: #7c3aed; }
    .step-num.hc { background: #0ea5e9; }
    .step-num.system { background: #f59e0b; }
    .step-num.guest { background: #10b981; }
    .step-num.ai { background: #ec4899; }

    .step-body {
      flex: 1;
      background: #1e293b;
      border-radius: 12px;
      padding: 20px;
      border: 1px solid #334155;
      transition: all 0.2s;
    }
    .step-body:hover { border-color: #475569; }
    .step-body.highlight-lms { border-left: 3px solid #7c3aed; }
    .step-body.highlight-hc { border-left: 3px solid #0ea5e9; }
    .step-body.highlight-sync { border-left: 3px solid #f59e0b; }
    .step-body.highlight-guest { border-left: 3px solid #10b981; }
    .step-body.highlight-ai { border-left: 3px solid #ec4899; }

    .step-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .step-system-tag {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .tag-lms { background: rgba(124,58,237,0.2); color: #a78bfa; }
    .tag-hc { background: rgba(14,165,233,0.2); color: #38bdf8; }
    .tag-sync { background: rgba(245,158,11,0.2); color: #fbbf24; }
    .tag-guest { background: rgba(16,185,129,0.2); color: #34d399; }
    .tag-ai { background: rgba(236,72,153,0.2); color: #f472b6; }

    .step-desc { font-size: 13px; color: #94a3b8; line-height: 1.6; }
    .step-detail {
      margin-top: 12px;
      padding: 12px;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      font-size: 12px;
      color: #64748b;
      line-height: 1.5;
    }
    .step-actions {
      margin-top: 12px;
      display: flex;
      gap: 8px;
    }
    .step-link {
      padding: 6px 14px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .step-link-lms { background: rgba(124,58,237,0.15); color: #a78bfa; border: 1px solid rgba(124,58,237,0.3); }
    .step-link-lms:hover { background: rgba(124,58,237,0.3); }
    .step-link-hc { background: rgba(14,165,233,0.15); color: #38bdf8; border: 1px solid rgba(14,165,233,0.3); }
    .step-link-hc:hover { background: rgba(14,165,233,0.3); }

    /* Dual screen preview */
    .dual-preview {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 16px;
    }
    .preview-frame {
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #334155;
    }
    .preview-frame-header {
      padding: 8px 12px;
      font-size: 11px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .preview-frame-header.lms-header { background: #7c3aed; color: #fff; }
    .preview-frame-header.hc-header { background: #0ea5e9; color: #fff; }
    .preview-frame iframe {
      width: 100%;
      height: 400px;
      border: none;
    }

    /* Callout */
    .callout {
      padding: 16px 20px;
      border-radius: 10px;
      margin: 20px 0;
      font-size: 13px;
      line-height: 1.5;
    }
    .callout-info { background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); color: #93c5fd; }
    .callout-warning { background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); color: #fcd34d; }
    .callout-success { background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.3); color: #86efac; }

    /* Quick links */
    .quick-links {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
    .quick-link {
      padding: 12px 20px;
      border-radius: 10px;
      background: #1e293b;
      border: 1px solid #334155;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      color: #e2e8f0;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .quick-link:hover { border-color: #60a5fa; background: #1e3a5f; }
  </style>
</head>
<body>
  <div class="journey-header">
    <a href="index.html">&larr; Back to Hub</a>
    <h1 style="margin-top:12px">End-to-End Journey Flows</h1>
    <p>Interactive walkthrough of how LMS and HyperConnect work together across key user scenarios</p>
  </div>

  <div class="journey-nav">
    <div class="journey-tab active" onclick="showSection('journey1', this)">Journey 1: Voicemail &rarr; Lead &rarr; Conversation</div>
    <div class="journey-tab" onclick="showSection('journey2', this)">Journey 2: SMS from LMS &rarr; HC Sync</div>
    <div class="journey-tab" onclick="showSection('journey3', this)">Journey 3: AI Call Scheduling</div>
    <div class="journey-tab" onclick="showSection('journey4', this)">Journey 4: Lead Conversion</div>
    <div class="journey-tab" onclick="showSection('journey5', this)">Journey 5: Cross-Navigation</div>
  </div>

  <div class="journey-content">

    <!-- JOURNEY 1 -->
    <div class="journey-section active" id="journey1">
      <div class="callout callout-info">
        <strong>Scenario:</strong> Unknown number calls and leaves a voicemail. Smart Bot creates a lead. Sales agent nurtures via LMS. Conversation stays in sync with HyperConnect.
      </div>

      <div class="step-track">
        <div class="step-card">
          <div class="step-num guest">1</div>
          <div class="step-body highlight-guest">
            <div class="step-title"><span class="step-system-tag tag-guest">Guest</span> Voicemail received</div>
            <div class="step-desc">Unknown number +1 (407) 203-8926 calls and leaves a voicemail about gym membership pricing. HyperConnect captures the voicemail.</div>
            <div class="step-detail">The voicemail Smart Bot transcribes: "Hi, I saw your ad on Facebook about the gym membership. I'd like to know more about pricing and class schedules."</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">2</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">System</span> Lead auto-created</div>
            <div class="step-desc">Smart Bot processes voicemail, creates a guest indicator with lead flag in the database, and auto-creates a new lead in LMS.</div>
            <div class="step-detail">Source: Voicemail | Lead type: Membership inquiry | Auto-assigned to sales queue</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num hc">3</div>
          <div class="step-body highlight-hc">
            <div class="step-title"><span class="step-system-tag tag-hc">HyperConnect</span> Lead badge appears & event added</div>
            <div class="step-desc">In HyperConnect, the phone number entry now shows a "LEAD" badge. A "New lead created: Membership Lead" event appears in the timeline with a deep link to LMS.</div>
            <div class="step-actions">
              <a href="hc.html" class="step-link step-link-hc">&#128065; See it in HC Mock &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">4</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Agent opens lead & sends SMS</div>
            <div class="step-desc">Sales agent Sarah opens the lead in LMS, reviews the voicemail, and sends an SMS: "Hello! Thank you for your interest in our full body laser service."</div>
            <div class="step-detail">The messaging component at the bottom of the center panel is used. It looks and behaves exactly like HyperConnect's messaging interface.</div>
            <div class="step-actions">
              <a href="lms.html" class="step-link step-link-lms">&#128065; Try it in LMS Mock &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">5</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">Sync</span> SMS appears in HyperConnect (&lt; 1 second)</div>
            <div class="step-desc">SignalR pushes the SMS event in real-time. It appears in HyperConnect's person timeline with a "via LMS" tag. No manual refresh needed.</div>
            <div class="step-detail">Sync target: &lt; 1 second latency | Retry: exponential backoff if failure | "Syncing..." indicator if > 5 seconds</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num guest">6</div>
          <div class="step-body highlight-guest">
            <div class="step-title"><span class="step-system-tag tag-guest">Guest</span> Replies via SMS</div>
            <div class="step-desc">Guest replies: "Can you please call tomorrow evening around 7pm?" The reply appears in HyperConnect AND in all active lead timelines in LMS.</div>
            <div class="step-detail">Edge case: If person has 3 leads, inbound SMS appears in all 3 lead timelines. AI score is computed and displayed alongside the message.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">7</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Agent creates task (does NOT sync to HC)</div>
            <div class="step-desc">Agent creates a Task: "Call on May 9, 2025 | 07:00PM". This task appears in the LMS lead timeline only. It does NOT sync to HyperConnect.</div>
            <div class="step-detail">Design principle: Lead-specific management events (tasks, notes, stage changes) remain in LMS to preserve distinct product value propositions.</div>
          </div>
        </div>
      </div>

      <div class="dual-preview">
        <div class="preview-frame">
          <div class="preview-frame-header lms-header">&#128188; AI Lead Manager</div>
          <iframe src="lms.html"></iframe>
        </div>
        <div class="preview-frame">
          <div class="preview-frame-header hc-header">&#128172; HyperConnect</div>
          <iframe src="hc.html"></iframe>
        </div>
      </div>
    </div>

    <!-- JOURNEY 2 -->
    <div class="journey-section" id="journey2">
      <div class="callout callout-info">
        <strong>Scenario:</strong> Agent sends SMS from LMS. Message syncs to HyperConnect in real-time. Private notes do NOT sync.
      </div>

      <div class="step-track">
        <div class="step-card">
          <div class="step-num lms">1</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Agent selects lead in left panel</div>
            <div class="step-desc">Agent clicks on "Membership Lead" under +1 (407) 203-8926. The center panel switches to filtered timeline view showing only this lead's activities.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">2</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Types and sends SMS</div>
            <div class="step-desc">Using the messaging component (bottom of center panel), agent types "Here's our membership pricing info..." and hits Send. The SMS appears immediately in the timeline.</div>
            <div class="step-detail">The messaging component includes: Reply/Private note toggle, SMS type selector, text input, attachment button, send button &mdash; matching HyperConnect exactly.</div>
            <div class="step-actions">
              <a href="lms.html" class="step-link step-link-lms">&#128065; Try sending a message &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">3</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">SignalR</span> Real-time sync to HyperConnect</div>
            <div class="step-desc">Within 1 second, the SMS appears in HyperConnect's person timeline. A "via LMS" tag indicates origin. No page refresh required.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">4</div>
          <div class="step-body highlight-lms" style="border-left-color:#f59e0b">
            <div class="step-title"><span class="step-system-tag tag-sync">Important</span> Private note does NOT sync</div>
            <div class="step-desc">If agent toggles to "Private note" and writes an internal note, it stays in LMS only. The toggle clearly separates public communication from internal notes.</div>
            <div class="step-detail">Private notes: visible in LMS lead timeline (marked private) | NOT visible in HyperConnect | NOT synced anywhere</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JOURNEY 3 -->
    <div class="journey-section" id="journey3">
      <div class="callout callout-info">
        <strong>Scenario:</strong> Sales manager schedules AI calls for bulk lead follow-up. System validates business hours. AI executes and logs results.
      </div>

      <div class="step-track">
        <div class="step-card">
          <div class="step-num lms">1</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Agent clicks "AI Call" button</div>
            <div class="step-desc">In the right panel, agent clicks the "AI Call" button (next to manual Call). A scheduling modal opens with fields for use case, prompt, context, and schedule time.</div>
            <div class="step-actions">
              <a href="lms.html" class="step-link step-link-lms">&#128065; Try the AI Call modal &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">2</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Fills scheduling details</div>
            <div class="step-desc">Agent selects "Appointment Follow-Up", writes prompt, reviews auto-populated context (lead name, last interaction, interest), optionally sets time.</div>
            <div class="step-detail">Context auto-populated: Lead name, phone, last interaction date, service of interest. For bulk: can select multiple leads with checkboxes.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">3</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">Rules Engine</span> Business hours validation</div>
            <div class="step-desc">System checks state/region-level rules. If scheduled time is within allowed hours (e.g., 9 AM &ndash; 5 PM EST), it's approved. Otherwise, auto-adjusted to next valid slot.</div>
            <div class="step-detail">Example: Agent schedules for 7:30 PM &rarr; System adjusts to 9:00 AM next business day and notifies agent.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num ai">4</div>
          <div class="step-body highlight-ai">
            <div class="step-title"><span class="step-system-tag tag-ai">AI Engine</span> Executes call at scheduled time</div>
            <div class="step-desc">At the scheduled time, AI calling engine initiates outbound call. Can handle 100+ parallel calls simultaneously for bulk outreach.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num ai">5</div>
          <div class="step-body highlight-ai">
            <div class="step-title"><span class="step-system-tag tag-ai">AI Engine</span> Results logged</div>
            <div class="step-desc">Call result captured: answered/not answered, duration, sentiment score (Positive/Negative/Neutral), key insights, recording link.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">6</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">Sync</span> Result in both LMS and HyperConnect</div>
            <div class="step-desc">"AI call completed" event with full details appears in LMS lead timeline AND syncs to HyperConnect person timeline. Both systems show recording playback.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JOURNEY 4 -->
    <div class="journey-section" id="journey4">
      <div class="callout callout-success">
        <strong>Scenario:</strong> Lead successfully nurtured. Agent converts lead. Badge removed from HyperConnect. Timeline archived in LMS.
      </div>

      <div class="step-track">
        <div class="step-card">
          <div class="step-num lms">1</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Agent clicks "Convert Lead"</div>
            <div class="step-desc">After successful appointment booking, agent clicks the "Convert Lead" button at the bottom of the right panel in LMS.</div>
            <div class="step-actions">
              <a href="lms.html" class="step-link step-link-lms">&#128065; Try lead conversion &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">2</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Confirmation dialog</div>
            <div class="step-desc">System shows: "Mark this lead as converted? This will remove the lead indicator in HyperConnect." Agent confirms.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">3</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">Sync</span> Real-time badge removal</div>
            <div class="step-desc">Lead flag removed in database. SignalR pushes update. HyperConnect removes badge immediately. "Lead converted" event added to both timelines.</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num hc">4</div>
          <div class="step-body highlight-hc">
            <div class="step-title"><span class="step-system-tag tag-hc">HyperConnect</span> Badge removed, regular guest</div>
            <div class="step-desc">The "LEAD" badge disappears. The entry now appears as a regular guest. If person had 2 leads and 1 converts, badge updates to "1 Lead".</div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">5</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS</span> Lead archived, read-only</div>
            <div class="step-desc">Lead status changes to "Converted". Timeline is archived but still accessible. Sales stage is set to "Won". Undo option available for 5 minutes.</div>
            <div class="step-detail">Edge case: If appointment gets canceled after conversion, lead remains converted. Agent can manually "reopen lead" if needed (pending business decision).</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JOURNEY 5 -->
    <div class="journey-section" id="journey5">
      <div class="callout callout-warning">
        <strong>Scenario:</strong> Cross-navigation between systems. HC &rarr; LMS via "New lead created" deep link. LMS &rarr; HC via "Linked guest profile".
      </div>

      <div class="step-track">
        <div class="step-card">
          <div class="step-num hc">1</div>
          <div class="step-body highlight-hc">
            <div class="step-title"><span class="step-system-tag tag-hc">HC &rarr; LMS</span> Click "New lead created" event</div>
            <div class="step-desc">In HyperConnect timeline, agent sees "New lead created: Membership Lead" event. Clicking "View in AI Lead Manager" deep-links to that specific lead in LMS.</div>
            <div class="step-detail">Navigation: App-switch pattern (not overlay). Lead ID passed via URL parameter. LMS opens with that lead pre-selected. If LMS isn't open, system launches it.</div>
            <div class="step-actions">
              <a href="hc.html" class="step-link step-link-hc">&#128065; See deep link in HC &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num lms">2</div>
          <div class="step-body highlight-lms">
            <div class="step-title"><span class="step-system-tag tag-lms">LMS &rarr; HC</span> Click "Linked guest profile"</div>
            <div class="step-desc">In LMS right panel, the "Linked guest profile" section shows "Emily Johnson Smith". Clicking "Change" with the external link icon deep-links to HyperConnect guest profile.</div>
            <div class="step-detail">Navigation: App-switch pattern. Guest ID passed via URL. HyperConnect opens with that guest pre-selected. If user lacks HC permissions, error message shown.</div>
            <div class="step-actions">
              <a href="lms.html" class="step-link step-link-lms">&#128065; See linked profile in LMS &rarr;</a>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-num system">3</div>
          <div class="step-body highlight-sync">
            <div class="step-title"><span class="step-system-tag tag-sync">System</span> Navigation transition</div>
            <div class="step-desc">Smooth app switch with loading indicator. Target: context load &lt; 2 seconds. Shared authentication means no re-login required.</div>
            <div class="step-detail">If target app not open: system launches it. If lead was deleted: "Lead not found" error with return option. If guest not linked: "No guest profile" with "Link profile" button.</div>
          </div>
        </div>
      </div>

      <div class="callout callout-warning" style="margin-top:24px">
        <strong>Note on navigation pattern:</strong> v1 uses app-switch/deep-link approach because no overlay pattern precedent exists in the platform. Overlay navigation is a future consideration (Phase 3) if the platform establishes the pattern.
      </div>
    </div>
  </div>

  <script>
    function showSection(sectionId, tab) {
      document.querySelectorAll('.journey-section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.journey-tab').forEach(t => t.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      tab.classList.add('active');
    }
  </script>
</body>
</html>
